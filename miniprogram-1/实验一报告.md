# 2025年夏季《移动软件开发》实验报告



<center>姓名：闫枳冰  学号：23020007139</center>

| 姓名和学号         | 闫枳冰，23020007139                  |
| -------------------- | -------------------------------- |
| 本实验属于哪门课程？ | 中国海洋大学25夏《移动软件开发》 |
| 实验名称？           | 实验1：第一个微信小程序          |
| 博客地址？           | https://blog.csdn.net/yyyyyyy0202/article/details/150779937?spm=1001.2014.3001.5502                       |
| Github仓库地址？     | XXXXXXX                          |

（备注：将实验报告发布在博客、代码公开至 github 是 **加分项**，不是必须做的）



## **一、实验目标**

1、学习使用快速启动模板创建小程序的方法；  
2、学习不使用模板手动创建小程序的方法。



## 二、实验步骤
下载安装并注册微信开发者工具之后，用微信提供的模板自动生成代码。
### 2.1自动生成小程序

#### 2.1.1 项目创建
进入微信开发者工具之后，点击左侧的“小程序”，然后再依次填写了项目名称、目录、AppID，后端服务选择不使用云服务器，开发模式选择小程序，模板选择对应模板。如图所示。![图一](image.png)  
其中AppID可以登录微信公众平台进行查看
#### 2.1.2 示例预览
将项目进行编译然后可以在模拟器上预览，如图所示。  
![alt text](image-1.png)
此外也可以手机扫码进行真机预览。
### 2.2手动创建小程序
#### 2.2.1 项目创建
按照2.2所讲创建项目，之后再进行修改页面配置等。
#### 2.2.2 页面配置
1. 项目创建完成后，会生成文件夹pages存放页面文件，首页默认命名为index。然后将app.json中的pages属性中的"pages/logs/logs"和上一行的逗号删除。![alt text](image-3.png)
2. 再删除utils文件夹及其内部所有内容。删除pages文件下的logs目录及其内部所有内容。  
3. 删除index.wxml和index.wxss的全部代码，删除index.js中的全部代码，并输入关键词“page”，回车自动补全代码。
4. 删除app.wxss中的全部代码。删除app.js中的全部代码，并输入关键词“app”，回车自动补全代码。![alt text](image-4.png)
#### 2.2.3 视图设计
1. 导航栏设计。小程序默认黑底白字，在app.json文件中添加背景色为663399紫色，字体颜色为白色。
   ![alt text](image-5.png)
   效果如下图所示。![alt text](image-6.png)
2. 在页面设计中有3个内容：头像、昵称、按钮。
在index.wxml中的代码片段如下图。![alt](image-7.png)
在index.wxss代码如下图。
![alt](image-8.png)
分别代表高100视窗，flex布局模式，垂直布局，水平方向居中，垂直方向分散布局。
3. 在项目中新建文件夹image，然后将图片存进去用作，默认头像。再将wxml页面中< image >组件进行修改，添加src属性来指定图片来源于根目录下，添加mode属性来让图片显示原图正确比例。![alt text](image-9.png)
4. 编译后效果如图。![alt text](image-10.png)
#### 2.2.4 逻辑实现
1. 获取微信用户信息和更新头像和昵称。将< button >组件修改为`<button bindtap="getMyInfo">`来激活微信用户信息功能，搭配wx.getUserProfile使用。同时在js页面追加getMyInfo函数。先调用wx.getUserProfile 接口，再填写desc用途说明；再success回调授权成功后的逻辑。`console.log(res)`在控制台打印res对象，方便调试时查看返回的用户信息是否正确。然后通过 setData 更新小程序页面的data数据。如下图
   ![alt text](image-11.png)
保存后预览，如果控制台能成功输出一段数据就说明获取成功。
2. 使用动态数据显示头像和昵称。将图片来源和文本内容使用双花括号。如图。
![alt text](image-12.png)
修改js文件，在data属性中追加动态数据的值，使其仍然可以显示原先的内容，如图。
![alt text](image-13.png)

## 三、程序运行结果
初始页面效果：
![alt text](image-14.png)
点击按钮后的效果：
![alt text](image-15.png)


## 四、问题总结与体会
1. 刚开始不太能区分开app和index中的各个文件，后来听老师讲解和实验知道了index是只针对页面，app是全局配置和控制小程序的，对整个小程序生效。
2. 按照lab1手册，写组件< button >写为`<button open-type="getUserInfo" bindgetuserinfo="getMyInfo">`，发现不行，然后上网搜索改成新版的 wx.getUserProfile 接口。是因为微信用户信息接口的历史迭代和隐私策略调整，需要后台权限和客户主动同意，所以最后也只能获得到灰色头像和“微信用户”的名称。如果需要获得还得在后台申请。
3. 经过此次学习，我对移动软件开发和具体框架有了一个大概的了解，学习到了使用快速启动模板和不使用模板创建小程序的方法，收获良多。
